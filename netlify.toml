[build]
  command = "npm run build"
  publish = ".next"
  [build.environment]
    NODE_VERSION = "22"
    BASELINE_BROWSER_MAPPING_IGNORE_OLD_DATA = "true"
    BROWSERSLIST_IGNORE_OLD_DATA = "true"
    NODE_OPTIONS = "--max_old_space_size=4096"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[[plugins]]
  package = "@netlify/plugin-lighthouse"
  [[plugins.inputs.audits]]
    path = "/"

## QC article proxy (Edge)
[[edge_functions]]
  path = "/article"
  function = "proxy-article"

[[edge_functions]]
  path = "/article/*"
  function = "proxy-article"

[[edge_functions]]
  path = "/assets/*"
  function = "proxy-article"

[[edge_functions]]
  path = "/category/*"
  function = "proxy-article"

## Redirect doc.theten.ai root to the main docs
[[redirects]]
  from = "http://doc.theten.ai/"
  to = "https://theten.ai/docs"
  status = 308
  force = true

[[redirects]]
  from = "https://doc.theten.ai/"
  to = "https://theten.ai/docs"
  status = 308
  force = true
