---
title: 通过代码自定义
---

使用 TMAN Designer 配置扩展，可以帮助你快速完成基础功能的修改与验证。  
但当你需要实现更复杂的功能，而这些功能并未在可视化界面中直接支持时，就需要通过编写代码来自定义实现。  
在修改代码之前，建议先熟悉并理解 `main` 扩展的结构与职责。

---

在 TEN 框架中，**连接（connections）** 用于定义视频与音频数据在不同扩展之间的传输方式。  
这种设计能够最大限度地降低不必要的复杂度，并确保系统在高负载场景下依旧保持优异性能——这也是 TEN 框架的重要优势之一。

对于 **事件与文本类数据**，由于其通常占用资源较少，更适合通过代码直接处理。  
这种方式不仅具备更高的灵活性，也能够更高效地支持复杂逻辑的实现。

为简化工作流，最新版本的默认 TEN Agent 应用在每个图（graph）中都引入了一个内置的 **“main” 扩展**。  
该扩展作为核心枢纽，负责组件间的编排与管理。

采用这一设计，你将获得以下收益：

1. **视频/音频数据** 始终通过扩展间的连接传输，从而充分利用框架的性能优化能力，而无需直接处理底层的媒体逻辑。  
2. **“main” 扩展** 可以与任意扩展交互，并统一收集所需的事件与文本数据：  
   * 对于 **入站事件/数据**，需要在 `property.json` 文件中注册从源扩展到 “main” 扩展的连接。  
   * 对于 **出站事件/数据**，则可在运行时调用 `setDests` 方法来动态指定目标扩展，无需在 `property.json` 中预先定义连接。  
3. **应用层逻辑集中化** —— 所有与业务相关的自定义逻辑均可放置于 “main” 扩展内，确保整体结构清晰。  
4. **扩展保持无状态与独立性** —— 其他扩展应尽量保持轻量与通用，便于在不同项目或场景中复用。  

此外，**“main” 扩展支持使用 TEN 框架所兼容的任意语言** 来编写。  
例如，你可以使用 Node.js 来实现 “main” 扩展，同时保留其他扩展使用 Python 或 C++。  
这一设计不仅避免了 Node.js 在媒体处理方面的性能瓶颈，也能在生产环境中更好地发挥优势。  
